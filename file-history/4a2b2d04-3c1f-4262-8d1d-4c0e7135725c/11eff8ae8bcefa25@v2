/**
 * API Service Layer
 * Axios wrapper for CFF Scheduler API
 */
import axios from 'axios';

const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';

const api = axios.create({
  baseURL: API_BASE_URL,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Health & Stats
export const getHealth = () => api.get('/health');
export const getStats = () => api.get('/stats');

// Resources
export const getResources = (type = null) => {
  const params = type ? { type } : {};
  return api.get('/resources', { params });
};
export const getResource = (id) => api.get(`/resources/${id}`);
export const createResource = (data) => api.post('/resources', data);
export const updateResource = (id, data) => api.put(`/resources/${id}`, data);
export const deleteResource = (id) => api.delete(`/resources/${id}`);
export const getResourceStats = () => api.get('/resources/stats');

// Requests
export const getRequests = () => api.get('/requests');
export const getRequest = (id) => api.get(`/requests/${id}`);
export const createRequest = (data) => api.post('/requests', data);
export const updateRequest = (id, data) => api.put(`/requests/${id}`, data);
export const deleteRequest = (id) => api.delete(`/requests/${id}`);

// Constraints
export const getConstraints = () => api.get('/constraints');
export const updateConstraints = (data) => api.put('/constraints', data);

// Locations
export const getLocations = () => api.get('/locations');
export const getDistanceMatrix = () => api.get('/locations/distances');
export const updateDistance = (data) => api.put('/locations/distances', data);

// Solver
export const runSolver = (config) => api.post('/solver/run', config);

// Plans
export const getPlans = () => api.get('/plans');
export const getPlan = (id) => api.get(`/plans/${id}`);
export const getPlanDashboard = (id) => api.get(`/plans/${id}/dashboard`);
export const deletePlan = (id) => api.delete(`/plans/${id}`);

export default api;
